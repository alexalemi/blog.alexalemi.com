<!doctype html><html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>The Seasons - blog.alexalemi.com</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-F5SW43T5NT"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-F5SW43T5NT');
    </script>

		<!-- favicon stuff -->
		<link rel="apple-touch-icon" sizes="180x180" href="../assets/apple-touch-icon-DqVKtK1I.png">
		<link rel="icon" type="image/png" sizes="32x32" href="../assets/favicon-32x32-DnaQtwKv.png">
		<link rel="icon" type="image/png" sizes="16x16" href="../assets/favicon-16x16-CmoNAwQn.png">
		<link rel="manifest" href="../assets/site-BwHFeIBa.webmanifest">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">
		<meta name="generator" content="Observable Notebook Kit v1.5.1">


    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="blog.AlexAlemi.com" href="https://blog.alexalemi.com/rss.xml">

    <!-- Fonts -->
    <script type="text/javascript">
        WebFontConfig = {
            google: { families: [ 'Muli', 'Lato' ] }
        };
        (function() {
            var wf = document.createElement('script');
            wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
            wf.type = 'text/javascript';
            wf.async = 'true';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(wf, s);
        })();
    </script>

    <script defer="" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        processEscapes: true
      }};
    </script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Inline CSS -->
		<style type="text/css">/* Copyright 2025 Observable, Inc. */

:root {
  --serif:
    "Source Serif 4", "Iowan Old Style", "Apple Garamond", "Palatino Linotype", "Times New Roman",
    "Droid Serif", Times, serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  --sans-serif:
    "Inter", -apple-system, BlinkMacSystemFont, "avenir next", avenir, helvetica, "helvetica neue",
    ubuntu, roboto, noto, "segoe ui", arial, sans-serif;
  --monospace: "Spline Sans Mono", Menlo, Consolas, monospace;
  --monospace-font: 14px/1.5 var(--monospace);
  --max-width: calc(1024px - 4 * 16px); /* max-w-5xl p-4 */
}

html {
  font: 17px/1.5 var(--serif);
  -webkit-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--theme-background);
  color: var(--theme-foreground);
  margin: 16px 0;
  padding: 16px 24px;
}

body {
  margin: auto;
  max-width: var(--max-width);
}

h1,
h2,
h3,
h4,
h5,
h6 {
  color: var(--theme-foreground-alt);
  font-weight: 700;
  line-height: 1.15;
  margin-top: 0;
  margin-bottom: 0.25rem;
  text-wrap: balance;
}

h2 + p,
h3 + p,
h4 + p,
h2 + table,
h3 + table,
h4 + table {
  margin-top: 0;
}

.observablehq:first-of-type h1 + h2 {
  color: var(--theme-foreground);
  font-size: 20px;
  font-style: italic;
  font-weight: normal;
  margin-bottom: 1rem; /* see h2 ~ p */
}

a[href] {
  color: var(--theme-foreground-focus);
  text-decoration: none;
}

a[href]:hover,
a[href]:focus {
  text-decoration: underline;
}

pre,
code,
tt {
  font-family: var(--monospace);
  font-size: 82.35294117%; /* from 17px to 14px */
}

pre code,
figcaption code {
  font-size: inherit;
}

pre[data-language] {
  position: relative;
}

pre[data-language]::before {
  content: attr(data-language);
  position: sticky;
  top: 0;
  left: 0;
  height: 0;
  display: block;
  text-align: right;
  margin-right: -4px;
  pointer-events: none;
  font-size: 12px;
  line-height: 21px;
  color: var(--theme-foreground-muted);
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
  font-size: 88.235294117%; /* from 17px to 15px */
}

h2[id] a[href],
h3[id] a[href] {
  color: inherit;
}

pre {
  line-height: 1.5;
}

img {
  max-width: 100%;
}

p,
table,
figure,
figcaption,
h1,
h2,
h3,
h4,
h5,
h6,
.katex-display {
  max-width: 640px;
}

blockquote,
ol,
ul {
  max-width: 600px;
}

blockquote {
  margin: 1rem 1.5rem;
}

ul,
ol {
  padding-left: 28px;
}

hr {
  height: 1px;
  margin: 1rem 0;
  padding: 1rem 0;
  border: none;
  background: no-repeat center/100% 1px
    linear-gradient(to right, var(--theme-foreground-faintest), var(--theme-foreground-faintest));
}

pre {
  background-color: var(--theme-background-alt);
  border-radius: 4px;
  margin: 1rem -1rem;
  min-height: 1.5em;
  padding: 4px 1rem;
  overflow-x: auto;
  overscroll-behavior-x: none;
  box-sizing: border-box;
}

pre > code:only-child {
  display: block;
  width: fit-content;
}

input:not([type]),
input[type="email"],
input[type="number"],
input[type="password"],
input[type="range"],
input[type="search"],
input[type="tel"],
input[type="text"],
input[type="url"] {
  width: 240px;
}

input,
canvas,
button {
  vertical-align: middle;
}

button,
input,
textarea {
  accent-color: var(--theme-foreground-focus);
}

table {
  width: 100%;
  border-collapse: collapse;
  font: 13px/1.2 var(--sans-serif);
}

table pre,
table code,
table tt {
  font-size: inherit;
  line-height: inherit;
}

th > pre:only-child,
td > pre:only-child {
  margin: 0;
  padding: 0;
}

th {
  color: var(--theme-foreground);
  text-align: left;
  vertical-align: bottom;
}

td {
  color: var(--theme-foreground-alt);
  vertical-align: top;
}

th,
td {
  padding: 3px 6.5px 3px 0;
}

th:last-child,
td:last-child {
  padding-right: 0;
}

tr:not(:last-child) {
  border-bottom: solid 1px var(--theme-foreground-faintest);
}

thead tr {
  border-bottom: solid 1px var(--theme-foreground-fainter);
}

figure,
table {
  margin: 1rem 0;
}

figure img {
  max-width: 100%;
}

figure > h2,
figure > h3 {
  font-family: var(--sans-serif);
}

figure > h2 {
  font-size: 20px;
}

figure > h3 {
  font-size: 16px;
  font-weight: normal;
}

figcaption {
  font: small var(--sans-serif);
  color: var(--theme-foreground-muted);
}

.observablehq--collapsed,
.observablehq--expanded.observablehq--inspect a {
  cursor: pointer;
}

.observablehq--caret {
  margin-right: 4px;
  vertical-align: baseline;
}

.observablehq--field {
  text-indent: -1rem;
  margin-left: 1rem;
}

.observablehq--inspect {
  font: var(--monospace-font);
  overflow-x: auto;
  white-space: pre;
  display: block;
  padding: 2px 0;
}

.observablehq--inspect.observablehq--import {
  white-space: normal;
}

.observablehq--inspect::-webkit-scrollbar {
  display: none;
}

.observablehq--error .observablehq--inspect {
  word-break: break-all;
  white-space: pre-wrap;
}

.observablehq--string-expand {
  margin-left: 6px;
  padding: 2px 6px;
  border-radius: 2px;
  font-size: 80%;
  background: var(--theme-background-alt);
  cursor: pointer;
  vertical-align: middle;
}

.observablehq--keyword {
  color: var(--syntax-keyword);
}

.observablehq--index,
.observablehq--key {
  color: var(--syntax-definition);
}

.observablehq--symbol,
.observablehq--regexp,
.observablehq--string {
  color: var(--syntax-string);
}

.observablehq--null {
  color: var(--syntax-keyword);
}

.observablehq--undefined {
  color: var(--syntax-variable);
}

.observablehq--prototype-key {
  color: var(--syntax-comment);
}

.observablehq--bigint,
.observablehq--boolean,
.observablehq--date,
.observablehq--forbidden,
.observablehq--number {
  color: var(--syntax-literal);
}

.observablehq--error {
  color: var(--theme-error);
}

.observablehq--cell {
  margin: 17px 0;
  min-height: 1px; /* prevent margin collapse when empty */
}

.tok-link {
  color: var(--syntax-link);
}

.tok-strong {
  font-weight: 600;
}

.tok-emphasis {
  font-style: italic;
}

.tok-keyword {
  color: var(--syntax-keyword);
}

.tok-atom {
  color: var(--syntax-atom);
}

.tok-literal {
  color: var(--syntax-literal);
}

.tok-string {
  color: var(--syntax-string);
}

.tok-comment {
  color: var(--syntax-comment);
}

.tok-invalid {
  color: var(--syntax-invalid);
}

.tok-variable {
  color: var(--syntax-variable);
}

.tok-definition {
  color: var(--syntax-definition);
}

.tok-meta {
  color: var(--syntax-meta);
}

.plot-d6a7b5 {
  --plot-background: var(--theme-background);
}

p .plot-d6a7b5 {
  display: inline-block;
}

.observablehq--cell:empty {
  min-height: 0;
}

.observablehq--cell:not(:empty) + pre {
  margin-top: -11px;
}
    </style>
  <script type="module" crossorigin src="../assets/seasons-KQsTy-HG.js"></script>
  <link rel="modulepreload" crossorigin href="../assets/index-VLdMEeTT.js">
  <link rel="stylesheet" crossorigin href="../assets/index-Bie_1e-s.css">
</head>

<body>


  <header>
    <h3>Alex Alemi's Blog</h3>
    <nav>
      <a href="https://blog.alexalemi.com">Index</a> |
      <a href="https://alexalemi.com">About Me</a> | 
      <a rel="alternate" type="application/rss+xml" title="blog.AlexAlemi.com" href="https://blog.alexalemi.com/rss.xml">RSS</a>
    </nav>
  </header>

  <article>
    <div class="content">
			<main><div id="cell-1" class="observablehq observablehq--cell"><div><h1>The Seasons</h1>
<p>I’m embarrased to admit that I realized the other day I don’t really, truly
understand how the seasons work.  I broadly knew it had to do with the tilt of
the Earth’s axis, but have to admit I never really worked it out.  In the
northern hemisphere, summers are warmer than winters. Why is that?  The other
ady I was talking with my wife and we disagreed on the primary effect.  I felt
as thought it had to do with the indicent angle of sunlight: the sun’s light is
more direct in summer, while she said it had to do with the increased day
length.</p>
<p>Let’s see if we can settle this, and figure out which is the dominating effect.</p>
</div></div><div id="cell-2" class="observablehq observablehq--cell"></div><pre data-language="js"><code class="language-js"><span class="tok-comment">// Our units will all be in hours</span>
<span class="tok-keyword">const</span> <span class="tok-definition">siderealDay</span> = <span class="tok-literal">23</span> + <span class="tok-literal">56</span>/<span class="tok-literal">60</span> + <span class="tok-literal">4</span>/<span class="tok-literal">60</span>/<span class="tok-literal">60</span>;
<span class="tok-keyword">const</span> <span class="tok-definition">year</span> = <span class="tok-literal">365.2422</span> * <span class="tok-literal">24</span>;
<span class="tok-keyword">const</span> <span class="tok-definition">eccentricity</span> = <span class="tok-literal">0.0167086</span>;</code></pre><div id="cell-3" class="observablehq observablehq--cell"></div><pre data-language="js"><code class="language-js"><span class="tok-comment">// The earth's tilt</span>
<span class="tok-keyword">const</span> <span class="tok-definition">theta0</span> = <span class="tok-literal">23.5</span> * <span class="tok-variable">Math</span>.<span class="tok-definition">PI</span> / <span class="tok-literal">180</span>;
<span class="tok-comment">// Our latitude relative to the north pole.</span>
<span class="tok-keyword">const</span> <span class="tok-definition">theta</span> = (<span class="tok-variable">latitude</span> + <span class="tok-literal">90</span>) / <span class="tok-literal">180</span> * <span class="tok-variable">Math</span>.<span class="tok-definition">PI</span>;
<span class="tok-comment">// Our angle in orbit around the sun</span>
<span class="tok-keyword">const</span> <span class="tok-definition">psi</span> = <span class="tok-variable">day</span> * <span class="tok-literal">24</span> / <span class="tok-variable">year</span> * <span class="tok-literal">2</span> * <span class="tok-variable">Math</span>.<span class="tok-definition">PI</span>;</code></pre><div id="cell-4" class="observablehq observablehq--cell"><div><p>Using these three coordinates, I wanted to try to work out the dot product with some normal
on the surface of the earth with the direction of the sun.</p>
</div></div><div id="cell-5" class="observablehq observablehq--cell"></div><pre data-language="js"><code class="language-js"><span class="tok-keyword">function</span> <span class="tok-definition">f</span>(<span class="tok-definition">theta</span>, <span class="tok-definition">phi</span>, <span class="tok-definition">psi</span>, <span class="tok-definition">theta0</span>) {
<span class="tok-keyword">return</span> (<span class="tok-variable">Math</span>.<span class="tok-definition">cos</span>(<span class="tok-variable">psi</span>) * <span class="tok-variable">Math</span>.<span class="tok-definition">cos</span>(<span class="tok-variable">phi</span>) * <span class="tok-variable">Math</span>.<span class="tok-definition">sin</span>(<span class="tok-variable">theta</span>) + 
        <span class="tok-variable">Math</span>.<span class="tok-definition">sin</span>(<span class="tok-variable">psi</span>) * <span class="tok-variable">Math</span>.<span class="tok-definition">sin</span>(<span class="tok-variable">phi</span>) * <span class="tok-variable">Math</span>.<span class="tok-definition">sin</span>(<span class="tok-variable">theta</span>) * <span class="tok-variable">Math</span>.<span class="tok-definition">cos</span>(<span class="tok-variable">theta0</span>) - 
        <span class="tok-variable">Math</span>.<span class="tok-definition">sin</span>(<span class="tok-variable">psi</span>) * <span class="tok-variable">Math</span>.<span class="tok-definition">cos</span>(<span class="tok-variable">theta</span>) * <span class="tok-variable">Math</span>.<span class="tok-definition">sin</span>(<span class="tok-variable">theta0</span>));
}

<span class="tok-keyword">function</span> <span class="tok-definition">relu</span>(<span class="tok-definition">x</span>) {
<span class="tok-keyword">return</span> <span class="tok-variable">x</span> &gt; <span class="tok-literal">0</span> ? <span class="tok-variable">x</span> : <span class="tok-literal">0</span>;
}</code></pre><div id="cell-6" class="observablehq observablehq--cell"></div><pre data-language="js"><code class="language-js"><span class="tok-keyword">let</span> <span class="tok-definition">ts</span> = <span class="tok-variable">d3</span>.<span class="tok-definition">range</span>(<span class="tok-literal">0</span>, <span class="tok-literal">24</span>, <span class="tok-literal">0.1</span>);
<span class="tok-keyword">let</span> <span class="tok-definition">data</span> = <span class="tok-variable">ts</span>.<span class="tok-definition">map</span>(<span class="tok-definition">x</span> =&gt; ({<span class="tok-definition">x</span>: <span class="tok-variable">x</span>, <span class="tok-definition">y</span>: <span class="tok-variable">relu</span>(<span class="tok-variable">f</span>(<span class="tok-variable">theta</span>, (<span class="tok-variable">day</span> * <span class="tok-literal">24</span> + <span class="tok-variable">x</span>)/<span class="tok-variable">siderealDay</span> * <span class="tok-literal">2</span> * <span class="tok-variable">Math</span>.<span class="tok-definition">PI</span> + <span class="tok-variable">Math</span>.<span class="tok-definition">PI</span>, <span class="tok-variable">psi</span>, <span class="tok-variable">theta0</span>))}));</code></pre><div id="cell-7" class="observablehq observablehq--cell"></div><div id="cell-8" class="observablehq observablehq--cell"></div><div id="cell-9" class="observablehq observablehq--cell"></div><div id="cell-10" class="observablehq observablehq--cell"></div><div id="cell-11" class="observablehq observablehq--cell"><div><p>The total irradiance is .</p>
</div></div><div id="cell-12" class="observablehq observablehq--cell"></div><div id="cell-13" class="observablehq observablehq--cell"></div><div id="cell-14" class="observablehq observablehq--cell"></div><div id="cell-15" class="observablehq observablehq--cell"><div><h1>Globe</h1>
<p>Let’s see if we can make a version of the earth from the direction of the sun.</p>
</div></div><div id="cell-16" class="observablehq observablehq--cell"></div><div id="cell-17" class="observablehq observablehq--cell"></div><div id="cell-18" class="observablehq observablehq--cell"></div><div id="cell-19" class="observablehq observablehq--cell"></div><div id="cell-20" class="observablehq observablehq--cell"></div><div id="cell-21" class="observablehq observablehq--cell"></div><div id="cell-22" class="observablehq observablehq--cell"></div><div id="cell-23" class="observablehq observablehq--cell"><div><h1>TODO</h1>
<ul>
<li>Drag person on globe, show value on other plots.</li>
</ul>
<h2 id="effect-of-eccentricity" tabindex="-1"><a href="#effect-of-eccentricity">Effect of eccentricity</a></h2>
<p>Let’s try to work out the correction for the apparent size given the eccentricity of earth’s orbit.  From wikipedia the equation for the polar coordinate of an ellipse in terms of one of its foci is:</p>
</div></div><div id="cell-24" class="observablehq observablehq--cell"></div><div id="cell-25" class="observablehq observablehq--cell"><div><p>Let’s work out what the effect would be for the effective size of the earth as this went around.The dimensions of the globe should scale linear with the distance from the sun, so, for something with the given polar coordinates we should work out the ratio of the largest to smallest distance.</p>
</div></div></main>
    </div>
  </article>

  <script src="https://giscus.app/client.js" data-repo="alexalemi/blog.alexalemi.com" data-repo-id="MDEwOlJlcG9zaXRvcnkyNjk2OTU4MzU=" data-category="Announcements" data-category-id="DIC_kwDOEBM7W84B_4Ke" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
  </script>

  <footer>
    <!-- <p>
    &copy; 2020 Alexander A. Alemi
    </p>
    -->
  </footer>





<style type="text/css">:root {
  --syntax-link: var(--theme-foreground-focus);
  --syntax-keyword: #e36209;
  --syntax-atom: #032f62;
  --syntax-literal: #6f42c1;
  --syntax-string: #22863a;
  --syntax-comment: var(--theme-foreground-muted);
  --syntax-invalid: var(--theme-error);
  --syntax-definition: #005cc5;
  --syntax-variable: var(--theme-foreground-alt);
  --syntax-meta: #d73a49;
}

:root {
  --theme-background-b: color-mix(in srgb, var(--theme-foreground) 4%, var(--theme-background-a));
  --theme-background: var(--theme-background-a);
  --theme-background-alt: var(--theme-background-b);
  --theme-foreground-alt: color-mix(in srgb, var(--theme-foreground) 90%, var(--theme-background-a));
  --theme-foreground-muted: color-mix(in srgb, var(--theme-foreground) 60%, var(--theme-background-a));
  --theme-foreground-faint: color-mix(in srgb, var(--theme-foreground) 50%, var(--theme-background-a));
  --theme-foreground-fainter: color-mix(in srgb, var(--theme-foreground) 30%, var(--theme-background-a));
  --theme-foreground-faintest: color-mix(in srgb, var(--theme-foreground) 14%, var(--theme-background-a));
  --theme-error: #e7040f;
  color-scheme: light;
}

:root {
  --theme-foreground: #1b1e23;
  --theme-foreground-focus: #3b5fc0;
  --theme-background-a: #ffffff;
}
</style></body></html>