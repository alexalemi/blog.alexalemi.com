const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./inputs-DoHVubAa.js","./inputs-Cuu9vI3M.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function W(e,t,n){n=n||{};var i=e.ownerDocument,r=i.defaultView.CustomEvent;typeof r=="function"?r=new r(t,{detail:n}):(r=i.createEvent("Event"),r.initEvent(t,!1,!1),r.detail=n),e.dispatchEvent(r)}function ge(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function Ee(e){return e===(e|0)+""}function x(e){const t=document.createElement("span");return t.className="observablehq--cellname",t.textContent=`${e} = `,t}const Fe=Symbol.prototype.toString;function A(e){return Fe.call(e)}const{getOwnPropertySymbols:Ue,prototype:{hasOwnProperty:Ve}}=Object,{toStringTag:ze}=Symbol,xe={},j=Ue;function K(e,t){return Ve.call(e,t)}function te(e){return e[ze]||e.constructor&&e.constructor.name||"Object"}function w(e,t){try{const n=e[t];return n&&n.constructor,n}catch{return xe}}const We=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function Ce(e){try{let t=We.filter(({symbol:a})=>e[a]===!0);if(!t.length)return;const n=t.find(a=>!a.modifier),i=n.name==="Map"&&t.find(a=>a.modifier&&a.prefix),r=t.some(a=>a.arrayish),o=t.some(a=>a.setish);return{name:`${i?i.name:""}${n.name}`,symbols:t,arrayish:r&&!o,setish:o}}catch{return null}}const{getPrototypeOf:ae,getOwnPropertyDescriptors:Ge}=Object,Te=ae({});function Se(e,t,n,i){let r=ge(e),o,a,s,d;e instanceof Map?e instanceof e.constructor?(o=`Map(${e.size})`,a=Ye):(o="Map()",a=D):e instanceof Set?e instanceof e.constructor?(o=`Set(${e.size})`,a=Je):(o="Set()",a=D):r?(o=`${e.constructor.name}(${e.length})`,a=He):(d=Ce(e))?(o=`Immutable.${d.name}${d.name==="Record"?"":`(${e.size})`}`,r=d.arrayish,a=d.arrayish?Ke:d.setish?Xe:Ze):i?(o=te(e),a=Qe):(o=te(e),a=D);const u=document.createElement("span");u.className="observablehq--expanded",n&&u.appendChild(x(n));const l=u.appendChild(document.createElement("a"));l.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M4 7L0 1h8z' fill='currentColor' />
  </svg>`,l.appendChild(document.createTextNode(`${o}${r?" [":" {"}`)),l.addEventListener("mouseup",function(c){c.stopPropagation(),Y(u,se(e,null,n,i))}),a=a(e);for(let c=0;!(s=a.next()).done&&c<20;++c)u.appendChild(s.value);if(!s.done){const c=u.appendChild(document.createElement("a"));c.className="observablehq--field",c.style.display="block",c.appendChild(document.createTextNode("  … more")),c.addEventListener("mouseup",function(f){f.stopPropagation(),u.insertBefore(s.value,u.lastChild.previousSibling);for(let g=0;!(s=a.next()).done&&g<19;++g)u.insertBefore(s.value,u.lastChild.previousSibling);s.done&&u.removeChild(u.lastChild.previousSibling),W(u,"load")})}return u.appendChild(document.createTextNode(r?"]":"}")),u}function*Ye(e){for(const[t,n]of e)yield et(t,n);yield*D(e)}function*Je(e){for(const t of e)yield Ie(t);yield*D(e)}function*Xe(e){for(const t of e)yield Ie(t)}function*He(e){for(let t=0,n=e.length;t<n;++t)t in e&&(yield T(t,w(e,t),"observablehq--index"));for(const t in e)!Ee(t)&&K(e,t)&&(yield T(t,w(e,t),"observablehq--key"));for(const t of j(e))yield T(A(t),w(e,t),"observablehq--symbol")}function*Ke(e){let t=0;for(const n=e.size;t<n;++t)yield T(t,e.get(t),!0)}function*Qe(e){for(const n in Ge(e))yield T(n,w(e,n),"observablehq--key");for(const n of j(e))yield T(A(n),w(e,n),"observablehq--symbol");const t=ae(e);t&&t!==Te&&(yield $e(t))}function*D(e){for(const n in e)K(e,n)&&(yield T(n,w(e,n),"observablehq--key"));for(const n of j(e))yield T(A(n),w(e,n),"observablehq--symbol");const t=ae(e);t&&t!==Te&&(yield $e(t))}function*Ze(e){for(const[t,n]of e)yield T(t,n,"observablehq--key")}function $e(e){const t=document.createElement("div"),n=t.appendChild(document.createElement("span"));return t.className="observablehq--field",n.className="observablehq--prototype-key",n.textContent="  <prototype>",t.appendChild(document.createTextNode(": ")),t.appendChild(b(e,void 0,void 0,void 0,!0)),t}function T(e,t,n){const i=document.createElement("div"),r=i.appendChild(document.createElement("span"));return i.className="observablehq--field",r.className=n,r.textContent=`  ${e}`,i.appendChild(document.createTextNode(": ")),i.appendChild(b(t)),i}function et(e,t){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(b(e)),n.appendChild(document.createTextNode(" => ")),n.appendChild(b(t)),n}function Ie(e){const t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(b(e)),t}function fe(e){const t=window.getSelection();return t.type==="Range"&&(t.containsNode(e,!0)||e.contains(t.anchorNode)||e.contains(t.focusNode))}function se(e,t,n,i){let r=ge(e),o,a,s,d;if(e instanceof Map?e instanceof e.constructor?(o=`Map(${e.size})`,a=tt):(o="Map()",a=R):e instanceof Set?e instanceof e.constructor?(o=`Set(${e.size})`,a=nt):(o="Set()",a=R):r?(o=`${e.constructor.name}(${e.length})`,a=ot):(d=Ce(e))?(o=`Immutable.${d.name}${d.name==="Record"?"":`(${e.size})`}`,r=d.arrayish,a=d.arrayish?rt:d.setish?it:at):(o=te(e),a=R),t){const c=document.createElement("span");return c.className="observablehq--shallow",n&&c.appendChild(x(n)),c.appendChild(document.createTextNode(o)),c.addEventListener("mouseup",function(f){fe(c)||(f.stopPropagation(),Y(c,se(e)))}),c}const u=document.createElement("span");u.className="observablehq--collapsed",n&&u.appendChild(x(n));const l=u.appendChild(document.createElement("a"));l.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M7 4L1 8V0z' fill='currentColor' />
  </svg>`,l.appendChild(document.createTextNode(`${o}${r?" [":" {"}`)),u.addEventListener("mouseup",function(c){fe(u)||(c.stopPropagation(),Y(u,Se(e,null,n,i)))},!0),a=a(e);for(let c=0;!(s=a.next()).done&&c<20;++c)c>0&&u.appendChild(document.createTextNode(", ")),u.appendChild(s.value);return s.done||u.appendChild(document.createTextNode(", …")),u.appendChild(document.createTextNode(r?"]":"}")),u}function*tt(e){for(const[t,n]of e)yield st(t,n);yield*R(e)}function*nt(e){for(const t of e)yield b(t,!0);yield*R(e)}function*it(e){for(const t of e)yield b(t,!0)}function*rt(e){let t=-1,n=0;for(const i=e.size;n<i;++n)n>t+1&&(yield G(n-t-1)),yield b(e.get(n),!0),t=n;n>t+1&&(yield G(n-t-1))}function*ot(e){let t=-1,n=0;for(const i=e.length;n<i;++n)n in e&&(n>t+1&&(yield G(n-t-1)),yield b(w(e,n),!0),t=n);n>t+1&&(yield G(n-t-1));for(const i in e)!Ee(i)&&K(e,i)&&(yield M(i,w(e,i),"observablehq--key"));for(const i of j(e))yield M(A(i),w(e,i),"observablehq--symbol")}function*R(e){for(const t in e)K(e,t)&&(yield M(t,w(e,t),"observablehq--key"));for(const t of j(e))yield M(A(t),w(e,t),"observablehq--symbol")}function*at(e){for(const[t,n]of e)yield M(t,n,"observablehq--key")}function G(e){const t=document.createElement("span");return t.className="observablehq--empty",t.textContent=e===1?"empty":`empty × ${e}`,t}function M(e,t,n){const i=document.createDocumentFragment(),r=i.appendChild(document.createElement("span"));return r.className=n,r.textContent=e,i.appendChild(document.createTextNode(": ")),i.appendChild(b(t,!0)),i}function st(e,t){const n=document.createDocumentFragment();return n.appendChild(b(e,!0)),n.appendChild(document.createTextNode(" => ")),n.appendChild(b(t,!0)),n}function ut(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${lt(e.getUTCFullYear())}-${C(e.getUTCMonth()+1,2)}-${C(e.getUTCDate(),2)}${n||i||r||o?`T${C(n,2)}:${C(i,2)}${r||o?`:${C(r,2)}${o?`.${C(o,3)}`:""}`:""}Z`:""}`}function lt(e){return e<0?`-${C(-e,6)}`:e>9999?`+${C(e,6)}`:C(e,4)}function C(e,t){return`${e}`.padStart(t,"0")}function dt(e){return ut(e,"Invalid Date")}var ct=Error.prototype.toString;function ft(e){return e.stack||ct.call(e)}var pt=RegExp.prototype.toString;function ht(e){return pt.call(e)}const Z=20;function mt(e,t,n,i){if(t===!1){if(he(e,/["\n]/g)<=he(e,/`|\${/g)){const u=document.createElement("span");i&&u.appendChild(x(i));const l=u.appendChild(document.createElement("span"));return l.className="observablehq--string",l.textContent=JSON.stringify(e),u}const a=e.split(`
`);if(a.length>Z&&!n){const u=document.createElement("div");i&&u.appendChild(x(i));const l=u.appendChild(document.createElement("span"));l.className="observablehq--string",l.textContent="`"+pe(a.slice(0,Z).join(`
`));const c=u.appendChild(document.createElement("span")),f=a.length-Z;return c.textContent=`Show ${f} truncated line${f>1?"s":""}`,c.className="observablehq--string-expand",c.addEventListener("mouseup",function(g){g.stopPropagation(),Y(u,b(e,t,!0,i))}),u}const s=document.createElement("span");i&&s.appendChild(x(i));const d=s.appendChild(document.createElement("span"));return d.className=`observablehq--string${n?" observablehq--expanded":""}`,d.textContent="`"+pe(e)+"`",s}const r=document.createElement("span");i&&r.appendChild(x(i));const o=r.appendChild(document.createElement("span"));return o.className="observablehq--string",o.textContent=JSON.stringify(e.length>100?`${e.slice(0,50)}…${e.slice(-49)}`:e),r}function pe(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,yt)}function yt(e){var t=e.charCodeAt(0);switch(t){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function he(e,t){for(var n=0;t.exec(e);)++n;return n}var _t=Function.prototype.toString,bt={prefix:"async ƒ"},wt={prefix:"async ƒ*"},me={prefix:"class"},vt={prefix:"ƒ"},gt={prefix:"ƒ*"};function Et(e,t){var n,i,r=_t.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":n=bt;break;case"AsyncGeneratorFunction":n=wt;break;case"GeneratorFunction":n=gt;break;default:n=/^class\b/.test(r)?me:vt;break}return n===me?N(n,"",t):(i=/^(?:async\s*)?(\w+)\s*=>/.exec(r))?N(n,"("+i[1]+")",t):(i=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(r))?N(n,i[1]?"("+i[1].replace(/\s*,\s*/g,", ")+")":"()",t):(i=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(r))?N(n,i[1]?"("+i[1].replace(/\s*,\s*/g,", ")+")":"()",t):N(n,"(…)",t)}function N(e,t,n){var i=document.createElement("span");i.className="observablehq--function",n&&i.appendChild(x(n));var r=i.appendChild(document.createElement("span"));return r.className="observablehq--keyword",r.textContent=e.prefix,i.appendChild(document.createTextNode(t)),i}const{prototype:{toString:xt}}=Object;function b(e,t,n,i,r){let o=typeof e;switch(o){case"boolean":case"undefined":{e+="";break}case"number":{e=e===0&&1/e<0?"-0":e+"";break}case"bigint":{e=e+"n";break}case"symbol":{e=A(e);break}case"function":return Et(e,i);case"string":return mt(e,t,n,i);default:{if(e===null){o=null,e="null";break}if(e instanceof Date){o="date",e=dt(e);break}if(e===xe){o="forbidden",e="[forbidden]";break}switch(xt.call(e)){case"[object RegExp]":{o="regexp",e=ht(e);break}case"[object Error]":case"[object DOMException]":{o="error",e=ft(e);break}default:return(n?Se:se)(e,t,i,r)}break}}const a=document.createElement("span");i&&a.appendChild(x(i));const s=a.appendChild(document.createElement("span"));return s.className=`observablehq--${o}`,s.textContent=e,a}function Y(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),W(t,"load")}const Ct=/\s+\(\d+:\d+\)$/m;class J{constructor(t){if(!t)throw new Error("invalid node");this._node=t,t.classList.add("observablehq")}pending(){const{_node:t}=this;t.classList.remove("observablehq--error"),t.classList.add("observablehq--running")}fulfilled(t,n){const{_node:i}=this;if((!Tt(t)||t.parentNode&&t.parentNode!==i)&&(t=b(t,!1,i.firstChild&&i.firstChild.classList&&i.firstChild.classList.contains("observablehq--expanded"),n),t.classList.add("observablehq--inspect")),i.classList.remove("observablehq--running","observablehq--error"),i.firstChild!==t)if(i.firstChild){for(;i.lastChild!==i.firstChild;)i.removeChild(i.lastChild);i.replaceChild(t,i.firstChild)}else i.appendChild(t);W(i,"update")}rejected(t,n){const{_node:i}=this;for(i.classList.remove("observablehq--running"),i.classList.add("observablehq--error");i.lastChild;)i.removeChild(i.lastChild);var r=document.createElement("div");r.className="observablehq--inspect",n&&r.appendChild(x(n)),r.appendChild(document.createTextNode((t+"").replace(Ct,""))),i.appendChild(r),W(i,"error",{error:t})}}J.into=function(e){if(typeof e=="string"&&(e=document.querySelector(e),e==null))throw new Error("container not found");return function(){return new J(e.appendChild(document.createElement("div")))}};function Tt(e){return(e instanceof Element||e instanceof Text)&&e instanceof e.constructor}function St(e,t){const n=document.createElement("div");if(new J(n).fulfilled(e),t)for(const i of t){let r=n;for(const o of i)r=r?.childNodes[o];r?.dispatchEvent(new Event("mouseup"))}return n}function $t(e){const t=document.createElement("div");return new J(t).rejected(e),t}function It(e){if(!kt(e))return;const t=e.querySelectorAll(".observablehq--expanded");if(t.length)return Array.from(t,n=>Lt(e,n))}function Ot(e){return e.nodeType===1}function kt(e){return Ot(e)&&e.classList.contains("observablehq")}function Lt(e,t){const n=[];for(;t!==e;)n.push(Pt(t)),t=t.parentNode;return n.reverse()}function Pt(e){return Array.prototype.indexOf.call(e.parentNode.childNodes,e)}const At=["audio source[src]","audio[src]","img[src]","picture source[src]","video source[src]","video[src]"].join(),Nt=["img[srcset]","picture source[srcset]"].join(),Dt=["a[href][download]","link[href]"].join(),Rt=[[At,"src"],[Nt,"srcset"],[Dt,"href"]];function qt(e,t){const n=i=>t.get(jt(i))??i;for(const[i,r]of Rt)for(const o of e.querySelectorAll(i)){if(Mt(o))continue;const a=decodeURI(o.getAttribute(r));r==="srcset"?o.setAttribute(r,Ut(a,n)):o.setAttribute(r,n(a))}}function Mt(e){return/(?:^|\s)external(?:\s|$)/i.test(e.getAttribute("rel")??"")}function Bt(e){const t=e.indexOf("?"),n=e.indexOf("#"),i=t>=0&&n>=0?Math.min(t,n):t>=0?t:n;return i>=0?e.slice(0,i):e}function jt(e){const t=Bt(e);return Ft(t)?t:`./${t}`}function Ft(e){return["./","../","/"].some(t=>e.startsWith(t))}function Ut(e,t){return e.trim().split(/\s*,\s*/).filter(n=>n).map(n=>{const i=n.split(/\s+/),r=t(i[0]);return r&&(i[0]=encodeURI(r)),i.join(" ")}).join(", ")}function Oe(e,t){const{root:n,expanded:i}=e,r=zt(t,n)?t:St(t,i[n.childNodes.length]);ke(e,r)}function ke(e,t){if(t.nodeType===11){let n;for(;n=t.firstChild;)e.root.appendChild(n)}else e.root.appendChild(t)}function Vt(e,t){ke(e,$t(t))}function zt(e,t){return(e instanceof Element||e instanceof Text)&&e instanceof e.constructor&&(!e.parentNode||t.contains(e))}function q(e){for(e.expanded=Array.from(e.root.childNodes,It);e.root.lastChild;)e.root.lastChild.remove()}function Wt(e,{autodisplay:t,assets:n}){return{_error:!1,_node:e.root,pending(){this._error&&(this._error=!1,q(e))},fulfilled(i){t&&(q(e),n&&i instanceof Element&&qt(i,n),Oe(e,i))},rejected(i){console.error(i),this._error=!0,q(e),Vt(e,i)}}}class S extends Error{constructor(t,n){super(t),this.input=n}}S.prototype.name="RuntimeError";function Gt(e){return e&&typeof e.next=="function"&&typeof e.return=="function"}function ne(e){return()=>e}function X(e){return e}function Yt(e){return()=>{throw e}}const Jt=Array.prototype,Xt=Jt.map;function I(){}const ue=1,F=2,V=3,B=Symbol("no-observer"),Ht=Promise.resolve();function O(e,t,n,i){n||(n=B),Object.defineProperties(this,{_observer:{value:n,writable:!0},_definition:{value:le,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:I,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Ht,writable:!0},_reachable:{value:n!==B,writable:!0},_rejector:{value:en(this)},_shadow:{value:Kt(t,i)},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}Object.defineProperties(O.prototype,{_pending:{value:an,writable:!0,configurable:!0},_fulfilled:{value:sn,writable:!0,configurable:!0},_rejected:{value:un,writable:!0,configurable:!0},_resolve:{value:nn,writable:!0,configurable:!0},define:{value:tn,writable:!0,configurable:!0},delete:{value:on,writable:!0,configurable:!0},import:{value:rn,writable:!0,configurable:!0}});function Kt(e,t){return t?.shadow?new Map(Object.entries(t.shadow).map(([n,i])=>[n,new O(F,e).define([],i)])):null}function Qt(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function Zt(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function le(){throw le}function $(){throw $}function en(e){return t=>{throw t===$?t:t===le?new S(`${e._name} is not defined`,e._name):t instanceof Error&&t.message?new S(t.message,e._name):new S(`${e._name} could not be resolved`,e._name)}}function ye(e){return()=>{throw new S(`${e} is defined more than once`)}}function tn(e,t,n){switch(arguments.length){case 1:{n=e,e=t=null;break}case 2:{n=t,typeof e=="string"?t=null:(t=e,e=null);break}}return de.call(this,e==null?null:String(e),t==null?[]:Xt.call(t,this._resolve,this),typeof n=="function"?n:ne(n))}function nn(e){return this._shadow?.get(e)??this._module._resolve(e)}function de(e,t,n){const i=this._module._scope,r=this._module._runtime;if(this._inputs.forEach(Zt,this),t.forEach(Qt,this),this._inputs=t,this._definition=n,this._value=void 0,n===I?r._variables.delete(this):r._variables.add(this),e!==this._name||i.get(e)!==this){let o,a;if(this._name)if(this._outputs.size)i.delete(this._name),a=this._module._resolve(this._name),a._outputs=this._outputs,this._outputs=new Set,a._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(this)]=a},this),a._outputs.forEach(r._updates.add,r._updates),r._dirty.add(a).add(this),i.set(this._name,a);else if((a=i.get(this._name))===this)i.delete(this._name);else if(a._type===V)a._duplicates.delete(this),this._duplicate=void 0,a._duplicates.size===1&&(a=a._duplicates.keys().next().value,o=i.get(this._name),a._outputs=o._outputs,o._outputs=new Set,a._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(o)]=a}),a._definition=a._duplicate,a._duplicate=void 0,r._dirty.add(o).add(a),r._updates.add(a),i.set(this._name,a));else throw new Error;if(this._outputs.size)throw new Error;e&&((a=i.get(e))?a._type===V?(this._definition=ye(e),this._duplicate=n,a._duplicates.add(this)):a._type===F?(this._outputs=a._outputs,a._outputs=new Set,this._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(a)]=this},this),r._dirty.add(a).add(this),i.set(e,this)):(a._duplicate=a._definition,this._duplicate=n,o=new O(V,this._module),o._name=e,o._definition=this._definition=a._definition=ye(e),o._outputs=a._outputs,a._outputs=new Set,o._outputs.forEach(function(s){s._inputs[s._inputs.indexOf(a)]=o}),o._duplicates=new Set([this,a]),r._dirty.add(a).add(o),r._updates.add(a).add(o),i.set(e,o)):i.set(e,this)),this._name=e}return this._version>0&&++this._version,r._updates.add(this),r._compute(),this}function rn(e,t,n){return arguments.length<3&&(n=t,t=e),de.call(this,String(t),[n._resolve(String(e))],X)}function on(){return de.call(this,null,[],I)}function an(){this._observer.pending&&this._observer.pending()}function sn(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)}function un(e){this._observer.rejected&&this._observer.rejected(e,this._name)}const Le=Symbol("variable"),Pe=Symbol("invalidation"),Ae=Symbol("visibility");function H(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["@variable",Le],["invalidation",Pe],["visibility",Ae],...t])},_source:{value:null,writable:!0}})}Object.defineProperties(H.prototype,{_resolve:{value:mn,writable:!0,configurable:!0},redefine:{value:ln,writable:!0,configurable:!0},define:{value:dn,writable:!0,configurable:!0},derive:{value:hn,writable:!0,configurable:!0},import:{value:cn,writable:!0,configurable:!0},value:{value:pn,writable:!0,configurable:!0},variable:{value:fn,writable:!0,configurable:!0},builtin:{value:yn,writable:!0,configurable:!0}});function ln(e){const t=this._scope.get(e);if(!t)throw new S(`${e} is not defined`);if(t._type===V)throw new S(`${e} is defined more than once`);return t.define.apply(t,arguments)}function dn(){const e=new O(ue,this);return e.define.apply(e,arguments)}function cn(){const e=new O(ue,this);return e.import.apply(e,arguments)}function fn(e,t){return new O(ue,this,e,t)}async function pn(e){let t=this._scope.get(e);if(!t)throw new S(`${e} is not defined`);if(t._observer===B){t=this.variable(!0).define([e],X);try{return await ie(this._runtime,t)}finally{t.delete()}}else return ie(this._runtime,t)}async function ie(e,t){await e._compute();try{return await t._promise}catch(n){if(n===$)return ie(e,t);throw n}}function hn(e,t){const n=new Map,i=new Set,r=[];function o(s){let d=n.get(s);return d||(d=new H(s._runtime,s._builtins),d._source=s,n.set(s,d),r.push([d,s]),i.add(s),d)}const a=o(this);for(const s of e){const{alias:d,name:u}=typeof s=="object"?s:{name:s};a.import(u,d??u,t)}for(const s of i)for(const[d,u]of s._scope)if(u._definition===X){if(s===this&&a._scope.has(d))continue;const l=u._inputs[0]._module;l._source&&o(l)}for(const[s,d]of r)for(const[u,l]of d._scope){const c=s._scope.get(u);if(!(c&&c._type!==F))if(l._definition===X){const f=l._inputs[0],g=f._module;s.import(f._name,u,n.get(g)||g)}else s.define(u,l._inputs.map(_n),l._definition)}return a}function mn(e){let t=this._scope.get(e),n;if(!t)if(t=new O(F,this),this._builtins.has(e))t.define(e,ne(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))t.import(e,this._runtime._builtin);else{try{n=this._runtime._global(e)}catch(i){return t.define(e,Yt(i))}n===void 0?this._scope.set(t._name=e,t):t.define(e,ne(n))}return t}function yn(e,t){this._builtins.set(e,t)}function _n(e){return e._name}const bn=typeof requestAnimationFrame=="function"?requestAnimationFrame:typeof setImmediate=="function"?setImmediate:e=>setTimeout(e,0);function Ne(e,t=Rn){const n=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_precomputes:{value:[],writable:!0},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:n},_global:{value:t}}),e)for(const i in e)new O(F,n).define(i,[],e[i])}Object.defineProperties(Ne.prototype,{_precompute:{value:gn,writable:!0,configurable:!0},_compute:{value:En,writable:!0,configurable:!0},_computeSoon:{value:xn,writable:!0,configurable:!0},_computeNow:{value:Cn,writable:!0,configurable:!0},dispose:{value:wn,writable:!0,configurable:!0},module:{value:vn,writable:!0,configurable:!0}});function wn(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach(e=>{e._invalidate(),e._version=NaN})}function vn(e,t=I){let n;if(e===void 0)return(n=this._init)?(this._init=null,n):new H(this);if(n=this._modules.get(e),n)return n;this._init=n=new H(this),this._modules.set(e,n);try{e(this,t)}finally{this._init=null}return n}function gn(e){this._precomputes.push(e),this._compute()}function En(){return this._computing||(this._computing=this._computeSoon())}function xn(){return new Promise(bn).then(()=>this._disposed?void 0:this._computeNow())}async function Cn(){let e=[],t,n,i=this._precomputes;if(i.length){this._precomputes=[];for(const o of i)o();await Tn(3)}t=new Set(this._dirty),t.forEach(function(o){o._inputs.forEach(t.add,t);const a=Dn(o);a>o._reachable?this._updates.add(o):a<o._reachable&&o._invalidate(),o._reachable=a},this),t=new Set(this._updates),t.forEach(function(o){o._reachable?(o._indegree=0,o._outputs.forEach(t.add,t)):(o._indegree=NaN,t.delete(o))}),this._computing=null,this._updates.clear(),this._dirty.clear(),t.forEach(function(o){o._outputs.forEach($n)});do{for(t.forEach(function(o){o._indegree===0&&e.push(o)});n=e.pop();)Ln(n),n._outputs.forEach(r),t.delete(n);t.forEach(function(o){Sn(o)&&(An(o,new S("circular definition")),o._outputs.forEach(In),t.delete(o))})}while(t.size);function r(o){--o._indegree===0&&e.push(o)}}function Tn(e=0){let t=Promise.resolve();for(let n=0;n<e;++n)t=t.then(()=>{});return t}function Sn(e){const t=new Set(e._inputs);for(const n of t){if(n===e)return!0;n._inputs.forEach(t.add,t)}return!1}function $n(e){++e._indegree}function In(e){--e._indegree}function On(e){return e._promise.catch(e._rejector)}function ee(e){return new Promise(function(t){e._invalidate=t})}function kn(e,t){let n=typeof IntersectionObserver=="function"&&t._observer&&t._observer._node,i=!n,r=I,o=I,a,s;return n&&(s=new IntersectionObserver(([d])=>(i=d.isIntersecting)&&(a=null,r())),s.observe(n),e.then(()=>(s.disconnect(),s=null,o()))),function(d){return i?Promise.resolve(d):s?(a||(a=new Promise((u,l)=>(r=u,o=l))),a.then(()=>d)):Promise.reject()}}function Ln(e){e._invalidate(),e._invalidate=I,e._pending();const t=e._value,n=++e._version,i=e._inputs,r=e._definition;let o=null;const a=e._promise=e._promise.then(s,s).then(d).then(u);function s(){return Promise.all(i.map(On))}function d(l){if(e._version!==n)throw $;for(let c=0,f=l.length;c<f;++c)switch(l[c]){case Pe:{l[c]=o=ee(e);break}case Ae:{o||(o=ee(e)),l[c]=kn(o,e);break}case Le:{l[c]=e;break}}return r.apply(t,l)}function u(l){if(e._version!==n)throw $;return Gt(l)?((o||ee(e)).then(Nn(l)),Pn(e,n,l)):l}a.then(l=>{e._value=l,e._fulfilled(l)},l=>{l===$||e._version!==n||(e._value=void 0,e._rejected(l))})}function Pn(e,t,n){const i=e._module._runtime;let r;function o(d){return new Promise(u=>u(n.next(r))).then(({done:u,value:l})=>u?void 0:Promise.resolve(l).then(d))}function a(){const d=o(u=>{if(e._version!==t)throw $;return r=u,s(u,d).then(()=>i._precompute(a)),e._fulfilled(u),u});d.catch(u=>{u===$||e._version!==t||(s(void 0,d),e._rejected(u))})}function s(d,u){return e._value=d,e._promise=u,e._outputs.forEach(i._updates.add,i._updates),i._compute()}return o(d=>{if(e._version!==t)throw $;return r=d,i._precompute(a),d})}function An(e,t){e._invalidate(),e._invalidate=I,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(I),e._value=void 0,e._rejected(t)}function Nn(e){return function(){e.return()}}function Dn(e){if(e._observer!==B)return!0;const t=new Set(e._outputs);for(const n of t){if(n._observer!==B)return!0;n._outputs.forEach(t.add,t)}return!1}function Rn(e){return globalThis[e]}const qn="modulepreload",Mn=function(e,t){return new URL(e,t).href},_e={},p=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){let u=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const a=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),d=s?.nonce||s?.getAttribute("nonce");r=u(n.map(l=>{if(l=Mn(l,i),l in _e)return;_e[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(!!i)for(let _=a.length-1;_>=0;_--){const y=a[_];if(y.href===l&&(!c||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${f}`))return;const m=document.createElement("link");if(m.rel=c?"stylesheet":qn,c||(m.as="script"),m.crossOrigin="",m.href=l,d&&m.setAttribute("nonce",d),document.head.appendChild(m),c)return new Promise((_,y)=>{m.addEventListener("load",_),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return r.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return t().catch(o)})},be=new Map;function De(e,t=document.baseURI){if(new.target!==void 0)throw new TypeError("FileAttachment is not a constructor");const n=new URL(e,t).href;let i=be.get(n);return i||(i=new P(n,e.split("/").pop()),be.set(n,i)),i}async function L(e){const t=await fetch(e.href);if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}class Bn{constructor(t,n=jn(t),i,r){Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mimeType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastModified",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperties(this,{name:{value:`${t}`,enumerable:!0},mimeType:{value:`${n}`,enumerable:!0},lastModified:{value:i===void 0?void 0:+i,enumerable:!0},size:{value:r===void 0?void 0:+r,enumerable:!0}})}async url(){return this.href}async blob(){return(await L(this)).blob()}async arrayBuffer(){return(await L(this)).arrayBuffer()}async text(t){return t===void 0?(await L(this)).text():new TextDecoder(t).decode(await this.arrayBuffer())}async json(){return(await L(this)).json()}async stream(){return(await L(this)).body}async dsv({delimiter:t=",",array:n=!1,typed:i=!1}={}){const[r,o]=await Promise.all([this.text(),p(()=>import("https://cdn.jsdelivr.net/npm/d3-dsv/+esm"),[],import.meta.url)]),a=o.dsvFormat(t);return(n?a.parseRows:a.parse)(r,i&&o.autoType)}async csv(t){return this.dsv({...t,delimiter:","})}async tsv(t){return this.dsv({...t,delimiter:"	"})}async image(t){const n=await this.url();return new Promise((i,r)=>{const o=new Image;new URL(n,document.baseURI).origin!==location.origin&&(o.crossOrigin="anonymous"),Object.assign(o,t),o.onload=()=>i(o),o.onerror=()=>r(new Error(`Unable to load file: ${this.name}`)),o.src=n})}async arrow(){const[t,n]=await Promise.all([p(()=>import("https://cdn.jsdelivr.net/npm/apache-arrow/+esm"),[],import.meta.url),L(this)]);return t.tableFromIPC(n)}async arquero(t){let n,i;switch(this.mimeType){case"application/json":n=this.text(),i="fromJSON";break;case"text/tab-separated-values":t?.delimiter===void 0&&(t={...t,delimiter:"	"});case"text/csv":n=this.text(),i="fromCSV";break;default:if(/\.arrow$/i.test(this.name))n=this.arrow(),i="fromArrow";else if(/\.parquet$/i.test(this.name))n=this.parquet(),i="fromArrow";else throw new Error(`unable to determine Arquero loader: ${this.name}`);break}const[r,o]=await Promise.all([p(()=>import("https://cdn.jsdelivr.net/npm/arquero/+esm"),[],import.meta.url),n]);return r[i](o,t)}async parquet(){const[t,n,i]=await Promise.all([p(()=>import("https://cdn.jsdelivr.net/npm/apache-arrow/+esm"),[],import.meta.url),p(()=>import("https://cdn.jsdelivr.net/npm/parquet-wasm/+esm"),[],import.meta.url).then(async r=>(await r.default("https://cdn.jsdelivr.net/npm/parquet-wasm/esm/parquet_wasm_bg.wasm"),r)),this.arrayBuffer()]);return t.tableFromIPC(n.readParquet(new Uint8Array(i)).intoIPCStream())}async xml(t="application/xml"){return new DOMParser().parseFromString(await this.text(),t)}async html(){return this.xml("text/html")}}function jn(e){const t=e.lastIndexOf("."),n=e.lastIndexOf("/");switch(t>0&&(n<0||t>n)?e.slice(t).toLowerCase():""){case".csv":return"text/csv";case".tsv":return"text/tab-separated-values";case".json":return"application/json";case".html":return"text/html";case".xml":return"application/xml";case".png":return"image/png";case".jpg":return"image/jpg";case".js":return"text/javascript";default:return"application/octet-stream"}}class P extends Bn{constructor(t,n,i,r,o){super(n,i,r,o),Object.defineProperty(this,"href",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"href",{value:t})}}Object.defineProperty(P,"name",{value:"FileAttachment"});De.prototype=P.prototype;function Fn(e){function t(n){const i=e(n+="");if(i==null)throw new Error(`File not found: ${n}`);if(typeof i=="object"&&"url"in i){const{url:r,mimeType:o}=i;return new P(r,n,o)}return new P(i,n)}return t.prototype=P.prototype,t}async function*Q(e){let t,n,i=!1;const r=e(o=>(n=o,t?(t(o),t=void 0):i=!0,o));if(r!=null&&typeof r!="function")throw new Error(typeof r=="object"&&"then"in r&&typeof r.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");try{for(;;)yield i?(i=!1,n):new Promise(o=>t=o)}finally{r?.()}}function Re(e){let t;return Object.defineProperty(Q(n=>{t=n,e!==void 0&&t(e)}),"value",{get:()=>e,set:n=>(e=n,void t?.(e))})}function Un(e){const t=Re(e);return[t,{get value(){return t.value},set value(n){t.value=n}}]}function re(e){return Q(t=>{const n=Vn(e),i=we(e),r=()=>t(we(e));return e.addEventListener(n,r),i!==void 0&&t(i),()=>e.removeEventListener(n,r)})}function we(e){const t=e,n=e;if("type"in e)switch(e.type){case"range":case"number":return t.valueAsNumber;case"date":return t.valueAsDate;case"checkbox":return t.checked;case"file":return t.multiple?t.files:t.files[0];case"select-multiple":return Array.from(n.selectedOptions,i=>i.value)}return t.value}function Vn(e){if("type"in e)switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change"}return"input"}async function*qe(){for(;;)yield Date.now()}async function*zn(e){let t;const n=[],i=e(r=>(n.push(r),t&&(t(n.shift()),t=void 0),r));if(i!=null&&typeof i!="function")throw new Error(typeof i=="object"&&"then"in i&&typeof i.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");try{for(;;)yield n.length?n.shift():new Promise(r=>t=r)}finally{i?.()}}function Me(e,t){return Q(n=>{let i;const r=new ResizeObserver(([o])=>{const a=o.contentRect.width;a!==i&&n(i=a)});return r.observe(e,t),()=>r.disconnect()})}const Wn=Object.freeze(Object.defineProperty({__proto__:null,input:re,now:qe,observe:Q,queue:zn,width:Me},Symbol.toStringTag,{value:"Module"}));function Gn(e,t){const n=document.createElement("canvas");return n.width=e,n.height=t,n}function Yn(e,t,n=devicePixelRatio){const i=document.createElement("canvas");i.width=e*n,i.height=t*n,i.style.width=`${e}px`;const r=i.getContext("2d");return r.scale(n,n),r}function Jn(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",`0 0 ${e} ${t}`),n.setAttribute("width",`${e}`),n.setAttribute("height",`${t}`),n}function Xn(e){return document.createTextNode(e)}let Hn=0;function Kn(e){return new Qn(`O-${e==null?"":`${e}-`}${++Hn}`)}class Qn{constructor(t){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"href",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=t,this.href=new URL(`#${t}`,location.href).href}toString(){return`url(${this.href})`}}const Zn=Object.freeze(Object.defineProperty({__proto__:null,canvas:Gn,context2d:Yn,svg:Jn,text:Xn,uid:Kn},Symbol.toStringTag,{value:"Module"}));var ei=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},ti=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},z;class ni{constructor(){z.set(this,void 0),Object.defineProperty(this,"fulfilled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rejected",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.next()}async next(){const t=await ei(this,z,"f");return ti(this,z,new Promise((n,i)=>(this.fulfilled=n,this.rejected=i)),"f"),{done:!1,value:t}}throw(){return{done:!0}}return(){return{done:!0}}}z=new WeakMap;const ii=()=>p(()=>import("https://cdn.jsdelivr.net/npm/lodash/+esm"),[],import.meta.url).then(e=>e.default),ri=()=>p(()=>import("https://cdn.jsdelivr.net/npm/arquero/+esm"),[],import.meta.url),oi=()=>p(()=>import("https://cdn.jsdelivr.net/npm/apache-arrow/+esm"),[],import.meta.url),ai=()=>p(()=>import("https://cdn.jsdelivr.net/npm/d3/+esm"),[],import.meta.url),si=()=>p(()=>import("./dot-DSyh6hFx.js"),[],import.meta.url).then(e=>e.dot),ui=()=>p(()=>import("https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm/+esm"),[],import.meta.url),li=()=>p(()=>import("./duckdb-CYBulaq7.js"),[],import.meta.url).then(e=>e.DuckDBClient),di=()=>p(()=>import("https://cdn.jsdelivr.net/npm/echarts/+esm"),[],import.meta.url),ci=()=>p(()=>import("https://cdn.jsdelivr.net/npm/htl/+esm"),[],import.meta.url),fi=()=>p(()=>import("https://cdn.jsdelivr.net/npm/htl/+esm"),[],import.meta.url).then(e=>e.html),pi=()=>p(()=>import("https://cdn.jsdelivr.net/npm/htl/+esm"),[],import.meta.url).then(e=>e.svg),hi=()=>p(()=>import("./inputs-DoHVubAa.js"),__vite__mapDeps([0,1]),import.meta.url),mi=()=>p(()=>import("./leaflet-D54mqpIu.js"),[],import.meta.url),yi=()=>p(()=>import("./mapboxgl-C94UFoDx.js"),[],import.meta.url).then(e=>e.default),_i=()=>p(()=>import("./md-xZ4-eaJj.js"),[],import.meta.url).then(e=>e.md),bi=()=>p(()=>import("./mermaid-CWCaPgOr.js"),[],import.meta.url).then(e=>e.mermaid),wi=()=>p(()=>import("https://cdn.jsdelivr.net/npm/@observablehq/plot/+esm"),[],import.meta.url),vi=()=>p(()=>import("https://cdn.jsdelivr.net/npm/react/+esm"),[],import.meta.url),gi=()=>p(()=>import("https://cdn.jsdelivr.net/npm/react-dom/+esm"),[],import.meta.url),Ei=()=>p(()=>import("./tex-BE43Lb2g.js"),[],import.meta.url).then(e=>e.tex),xi=()=>p(()=>import("https://cdn.jsdelivr.net/npm/topojson-client/+esm"),[],import.meta.url),Ci=()=>p(()=>import("./vega-lite-ClQwpDTB.js"),[],import.meta.url).then(e=>e.vl),Ti=Object.freeze(Object.defineProperty({__proto__:null,Arrow:oi,DuckDBClient:li,Inputs:hi,L:mi,Plot:wi,React:vi,ReactDOM:gi,_:ii,aq:ri,d3:ai,dot:si,duckdb:ui,echarts:di,htl:ci,html:fi,mapboxgl:yi,md:_i,mermaid:bi,svg:pi,tex:Ei,topojson:xi,vl:Ci},Symbol.toStringTag,{value:"Module"}));ce.resolve=Be;function ce(...e){return e.length===1?import(Be(e[0])):Promise.all(e.map(t=>ce(t))).then(t=>Object.assign({},...t))}function Si(e){const t=e.split("/"),n=e.startsWith("@")?[t.shift(),t.shift()].join("/"):t.shift(),i=n.indexOf("@",1),r=i>0?n.slice(0,i):n,o=i>0?n.slice(i):"",a=t.length>0?`/${t.join("/")}`:"";return{name:r,range:o,path:a}}function Be(e){const t=String(e);if($i(t)||Ii(t))return t;const{name:n,range:i,path:r}=Si(t);return`https://cdn.jsdelivr.net/npm/${n}${i}${r+(Oi(r)||ki(r)?"":"/+esm")}`}function $i(e){return/^\w+:/.test(e)}function Ii(e){return/^(\.\/|\.\.\/|\/)/.test(e)}function Oi(e){return/(\.\w*)$/.test(e)}function ki(e){return/(\/)$/.test(e)}const Li=()=>E(v("aapl.csv")),Pi=()=>E(v("alphabet.csv")),Ai=()=>E(v("cars.csv")),Ni=()=>E(v("citywages.csv")),Di=()=>E(v("diamonds.csv")),Ri=()=>E(v("flare.csv")),qi=()=>E(v("industries.csv")),Mi=()=>Vi(v("miserables.json")),Bi=()=>E(v("olympians.csv")),ji=()=>E(v("penguins.csv")),Fi=()=>E(v("pizza.csv")),Ui=()=>E(v("weather.csv"));function v(e){return`https://cdn.jsdelivr.net/npm/@observablehq/sample-datasets/${e}`}async function Vi(e){const t=await fetch(e);if(!t.ok)throw new Error(`unable to fetch ${e}: status ${t.status}`);return t.json()}async function zi(e){const t=await fetch(e);if(!t.ok)throw new Error(`unable to fetch ${e}: status ${t.status}`);return t.text()}async function E(e,t){const[n,i]=await Promise.all([zi(e),p(()=>import("https://cdn.jsdelivr.net/npm/d3-dsv/+esm"),[],import.meta.url)]);return i.csvParse(n,i.autoType)}const Wi=Object.freeze(Object.defineProperty({__proto__:null,aapl:Li,alphabet:Pi,cars:Ai,citywages:Ni,diamonds:Di,flare:Ri,industries:qi,miserables:Mi,olympians:Bi,penguins:ji,pizza:Fi,weather:Ui},Symbol.toStringTag,{value:"Module"}));function Gi(e,t){return(n,...i)=>e.sql.call(e,n,...i).then(t)}const Yi=document.querySelector("main")??document.body,Ji={now:()=>qe(),width:()=>Me(Yi),FileAttachment:()=>De,Generators:()=>Wn,Mutable:()=>Re,DOM:()=>Zn,require:()=>ce,__sql:()=>Gi,__ojs_observer:()=>()=>new ni,...Ti,...Wi},oe=Object.assign(new Ne({...Ji,__ojs_runtime:()=>oe}),{fileAttachments:Fn}),k=oe.main=oe.module();k.constructor.prototype.defines=function(e){return this._scope.has(e)||this._builtins.has(e)||this._runtime._builtin._scope.has(e)};function h(e,t,n=Wt){const{id:i,body:r,inputs:o=[],outputs:a=[],output:s,autodisplay:d,autoview:u,automutable:l}=t,c=e.variables,f=k.variable(n(e,t),{shadow:{}}),g=s??(a.length?`cell ${i}`:null);if(o.includes("display")||o.includes("view")){let m=-1;const _=new f.constructor(2,f._module);if(_.define(o.filter(y=>y!=="display"&&y!=="view"),()=>{const y=f._version;return U=>{if(y<m)throw new Error("stale display");if(e.variables[0]!==f)throw new Error("stale display");return y>m&&q(e),m=y,Oe(e,U),U}}),f._shadow.set("display",_),o.includes("view")){const y=new f.constructor(2,f._module,null,{shadow:{}});y._shadow.set("display",_),y.define(["display"],U=>je=>re(U(je))),f._shadow.set("view",y)}}else d||q(e);if(c.push(f.define(g,o,r)),s!=null){if(u){const m=ve(s,"viewof$");c.push(k.define(m,[s],re))}else if(l){const m=ve(s,"mutable "),_=`cell ${i}`;f.define(m,[_],([y])=>y),c.push(k.define(s,o,r),k.define(_,[s],Un),k.define(`mutable$${m}`,[_],([,y])=>y))}}else for(const m of a)c.push(k.variable(!0).define(m,[g],_=>_[m]))}function ve(e,t){if(!e.startsWith(t))throw new Error(`expected ${t}: ${e}`);return e.slice(t.length)}h({root:document.getElementById("cell-2"),expanded:[],variables:[]},{id:2,body:()=>({leapConst:1461}),inputs:[],outputs:["leapConst"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-3"),expanded:[],variables:[]},{id:3,body:(e,t)=>e`Recently, our local newspaper ran a short article highlighting a "Leapling" born on Leap Day in a local hospital, and said that such an event was rare, occurring with a rate of only 1 in ${t}.  Naturally they got this number from:
`,inputs:["md","leapConst"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-4"),expanded:[],variables:[]},{id:4,body:e=>e.block`\frac{1}{3 \cdot 365 + 366} = \frac{1}{1461}`,inputs:["tex"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-5"),expanded:[],variables:[]},{id:5,body:(e,t)=>e`
Unfortunately, as we'll be able to show below, this claim is *demonstrably false*! 
It also offers an opportunity to share some interesting stories, and give us an excuse for introducing 
the basics of statistics.

## Gregorian Calendar

First, I feel as though many people have forgotten the relevance and difference between the [Julian](https://en.wikipedia.org/wiki/Julian_calendar) and [Gregorian calendars](https://en.wikipedia.org/wiki/Gregorian_calendar). In the western calendar, Thursday October 4, 1582 was followed by *Friday October 15, 1582*.  There were 10 days that never happened.

We all know the current calendar used in the Western world consists of 365 days, but with a leap day inserted at the end of February in every year divisible by 4.  Except, that *isn't* the current calendar of the western world. What I just described was the Julian calendar, first proposed by Julius Caeser, which was in effect started on January 1, 45 BC (by our count).  This calendar has an average year length of 365.25 days, and has a leap day every ${t} days (as in the paper's claim).  Unfortunately, this doesn't align perfectly with the 365.2522 day [tropical year](https://en.wikipedia.org/wiki/Tropical_year).^[The tropical year is the time it takes for the sun to return to the same point in the sky, which happens 20 minutes sooner than when the Earth finishes its journey around the Sun, aka, the [sidereal year](https://en.wikipedia.org/wiki/Sidereal_year) because of the precession of the equinoxes)]

Because of this misalignment, every ${(1/.0022).toFixed(1)} years, the Julian calendar drifts a day with respect to the equinoxes and solstices.  By the 1500s, since we had been using the Julian calendar for more than a millenia, it had drifted a dozen days or so since it was established.  This created an issue for the Catholic church, which used the [*computus*](https://en.wikipedia.org/wiki/Date_of_Easter) to calculate the date of Easter.  By 1582, the discrepency in dates was unacceptable to the Church, and Pope Gregory XIII would institute the [Gregorian Calendar](https://en.wikipedia.org/wiki/Gregorian_calendar) which tried to bring the calendar into better alignment with the tropical year by deleting a leap year every century and then re-inserting it back every 400 years.  To correct for the perceived drift, a ten day leap was inserted, making the day after Thursday October 4, 1582: Friday October 15, 1582. 

So, for the current calendar used by most of the Western world, if the year is divisible by 4, it is a leap year, *unless* it is also divisible by 100, in which case it is a normal year, *unless* it is also divisible by 400, in which case it is indeed a leap year.

This puts us at an interesting time in the Gregorian calendar, since the year 2000 was one of these rare, doubly modified years and so was an ordinary leap year.  Essentially no one alive today was around to observe the last leap day removal in 1900, and few of us will be around to above the next one in 2100, but it is important on the time scales of centuries that we follow the Gregorian rather than Julian calendar and that has helped keep our seasons, equinoxes and solstices aligned with fixed dates.

## Obnoxious Precision

The Gregorian calendar repeats every 400 years, or 146,097 days in which there are 97 leap days.  If we wanted to be erroneously pedantic, we could take issue with the newspaper's claim of 1 in ${t} leaplings by saying that for the Gregorian calendar leap days occur instead every 97 out of 146097 days or 1 in ${(146097/97).toFixed(6)}.

Of course, this is annoying.  It is also *wrong*.  It harkens back to grading freshman physics homework solutions where students would report their answers with 9 decimal places as they would simply write down all 10 digits their calculator would display.  Above, I gave the odds of a leaping with 10 significant digits, specifying it to a precision of 0.0000005 days or *40 milliseconds*!  That's absurd.  However, it is also absurd to claim that leaplings occur at a rate of 1 in ${(146097/97).toFixed(0)} despite the better decimal habits.

Why? Because as we said above, essentially no one alive today was around to see the last leap day deletion.  For people we interact with it is *more correct* to say that the ratio of leaplings is 1 in ${t} than it is to say its 1 in ${(146097/97).toFixed(0)}, as that is a better model of the reality of the situation.

## Better Models

Of course, if we are interested in making appeals to reality, why don't we actually take a look at some data. It's well known that birth rates are not uniform across the year and that they show seasonal, weekly and even data specific influences.  Gelman et al. even used a hierarchical Bayesian model of these effects as the cover of [their book](http://www.stat.columbia.edu/~gelman/book/):

<img src="http://www.stat.columbia.edu/~gelman/book/bda_cover.png" alt="Bayesian Data Analysis Cover Image" style="max-width: 480px;">

Even on the cover we can see that there is a Leap Day specific supression of births, more than you would expect from simply the rarity of leap days.

In a [followup analysis](https://statmodeling.stat.columbia.edu/2016/05/18/birthday-analysis-friday-the-13th-update/), the effects got even stronger:

<img src="https://statmodeling.stat.columbia.edu/wp-content/uploads/2016/05/bialik-fridaythe13th-1-1024x846.png" alt="Re-analysis of day of year effects" style="max-width: 680px;" />

## Observations

But, in order to get a good estimate of the rarity of leaplings, we don't have to do a fancy hierarchical model, we can just look at the data directly. We'll use the same data as in the reanalysis, available [here](https://raw.githubusercontent.com/fivethirtyeight/data/master/births/US_births_2000-2014_SSA.csv), consisting of births from 2000 to 2014 collected by the US Social Security Administration.`,inputs:["md","leapConst"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-6"),expanded:[],variables:[]},{id:6,body:e=>({data:e(new URL(""+new URL("US_births_2000-2014_SSA-CJB9fFXN.csv",import.meta.url).href,import.meta.url).href).csv({typed:!0})}),inputs:["FileAttachment"],outputs:["data"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-7"),expanded:[],variables:[]},{id:7,body:e=>{const t=e.reduce((u,l)=>u+l.births,0);function n(u){return u.date_of_month==29&u.month==2}function i(u,l){return u+l.births}const r=e.filter(n).reduce(i,0),o=e.length,a=e.filter(n).length,s=o-a,d=t-r;return{totalBirths:t,leapDay:n,sumBirths:i,leaplings:r,totalDays:o,leapDays:a,nonLeapDays:s,nonLeaplings:d}},inputs:["data"],outputs:["totalBirths","leapDay","sumBirths","leaplings","totalDays","leapDays","nonLeapDays","nonLeaplings"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-8"),expanded:[],variables:[]},{id:8,body:(e,t,n,i,r,o,a)=>e`
In this data there are a total of ${t.toLocaleString()} babies: ${n.toLocaleString()} babies born on ${i} leap days compared to ${r.toLocaleString()} babies born on ${o.toLocaleString()} non-leapdays over 14 years.  Is this consistent with the papers claim of 1 in ${a}? 


Let's try to calculate an estimate of the rate from the data, accounting for the fact that the data doesn't contain an even number of leap year cycles.  We can look at the average number of babies born on a nonleapday, multiply that up by 1460 and compare it to the number of leaplings born per leapday on average to get an empirical estimate of the leapling rate.`,inputs:["md","totalBirths","leaplings","leapDays","nonLeaplings","nonLeapDays","leapConst"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-9"),expanded:[],variables:[]},{id:9,body:(e,t,n,i)=>{function r(a){return(e-a)/t*1460/(a/n)}const o=r(i);return{estimateRate:r,empiricalLeaplingRate:o}},inputs:["totalBirths","nonLeapDays","leapDays","leaplings"],outputs:["estimateRate","empiricalLeaplingRate"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-10"),expanded:[],variables:[]},{id:10,body:(e,t,n)=>e`In our data, this estimate is ${t.toFixed(1)}.  This certaintly isn't exactly the ${n} reported in the newspaper, but is it *consistent*?  The data we have are random and any time we collect a dataset like this we would expect some fluctuations. Could it be that our observed deviation is just a random fluctuation that took us away from ${n}?

## Statistical Significance and the Nature of Statistical Argument

To answer that, let's try to do statistics properly.  We'll imagine replacing our data with data we would be just as happy with under the null hypothesis: in this case the assumption that births are equally likely on every date.  To do that, we can simply *shuffle* our data in the appropriate way. Imagine taking all of the births in this dataset and randomly assigning them to a date within the interval of the dataset, then we could recalculate our corrected estimate from that shuffled dataset and see what we get.

A single simulation gives us a single estimate:`,inputs:["md","empiricalLeaplingRate","leapConst"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-11"),expanded:[],variables:[]},{id:11,body:(e,t,n,i,r)=>e(t.randomBinomial(n,i/r)()),inputs:["estimateRate","d3","totalBirths","leapDays","totalDays"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-12"),expanded:[],variables:[]},{id:12,body:e=>({rawSimData:e(new URL(""+new URL("leapdaySim-_r5I10NS.json",import.meta.url).href,import.meta.url).href).json()}),inputs:["FileAttachment"],outputs:["rawSimData"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-13"),expanded:[],variables:[]},{id:13,body:(e,t)=>{const n=Object.values(e);return t(n),{simData:n}},inputs:["rawSimData","display"],outputs:["simData"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-14"),expanded:[],variables:[]},{id:14,body:(e,t)=>e`Doing this ${t.length.toLocaleString()} times we get a whole dataset of simulated values:`,inputs:["md","simData"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-15"),expanded:[],variables:[]},{id:15,body:(e,t)=>e`Which we can plot as a histogram, along with both the ${t} we simulated (black dashed), as well as our observed estimate from the data (red). Notice that the claim that our observed leapling rate varied away from ${t} because of a random fluctuation is *incredulous*.  That just isn't possible.  There is no way we would have observed such a fluctuation. `,inputs:["md","leapConst"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-16"),expanded:[],variables:[]},{id:16,body:(e,t,n,i)=>e(t.plot({y:{grid:!0},x:{domain:[1400,1600]},marks:[t.areaY(n,t.binX({y:"count",filter:null},{fillOpacity:.2})),t.lineY(n,t.binX({y:"count",filter:null})),t.ruleY([0]),t.ruleX([1461],{stroke:"black",strokeDasharray:[1,0,1]}),t.ruleX([i],{stroke:"red"})]})),inputs:["display","Plot","simData","empiricalLeaplingRate"],outputs:[],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-17"),expanded:[],variables:[]},{id:17,body:(e,t,n)=>e`
What we've just done is the very heart of statistical argument.  We had some *null hypothesis* we believed might apply, namely that births are uniformly distributed across days, and we had an empirical estimate of the observed rate of births on leap days (correcting for the 4 year calendar cycle), and we wanted to ask whether the observation we made was *consistent* with the null hypothesis.  To do this, we had to replace our data with data we deemed admissible under the null hypothesis: in this case, if the dates don't matter, we could have taken our dataset of births and shuffled the associated birth day for each of them and that should have been just as likely a dataset under the null hypothesis.  We simulated this and for each simulation computed the same *statistic* we had computed on the original dataset.  The final determination we need to make is as to whether or not the observation we made (red line) could have been a fair samply from the *sampling distribution* under the null hypothesis. In this case, it's clear it isn't.


## Bootstrapping and Confidence Intervals

We've decided we can clearly rule the newspapers claim as *false*, but if we were going to write the article, what value should we give?  We could give the ${t} we observed, but again, given the stochastic or random nature of data, we should attempt to report more than a single number that we would believe represents the true leapling rate.

We'd like to instead report something like a distribution for our beliefs, which values would we allow and to what degree?  Unfortunately we have but the one dataset, how can we turn that into a distribution of measurements?

The [bootstrapping](https://en.wikipedia.org/wiki/Bootstrapping_(statistics)) comes to our rescue.  Again, the core idea is simple, let's fix the glitch.  We only had one dataset, so let's fix that and create a whole slew of datasets that we would just as *credible* as the one we have.  A general purpose way to do that is to resample our data with replacement.  Imagine taking every one of these births and putting them into a hat.  If we drew out all ${n.toLocaleString()} births, one at a time, we would exactly recreate our dataset (albeit in a random order), but we can generate a new dataset that is just as credible if we put those ${n.toLocaleString()} in our hat and draw out a total of ${n.toLocaleString()} from the hat, but ensure we *replace* each after we draw it out, meaning it could reoccur.

There is an approximation happening here, we are *modelling* the data in some capacity, in this case the model turns out to be equivalent to trusting the empirical data distribution as if it were the proper data generating distribution, but its a fairly inoccuous assumption.  We don't need to say that our data is Gaussian, or anything about its moments or tail behavior, we are simply drawing out the data that was observed, whatever distribution that may have been drawn from, we simply allow that those births could reoccur with a rate of 1 to ${n.toLocaleString()}.

We can simulate this process efficiently by judicious use of a [Binomial Distribution](https://en.wikipedia.org/wiki/Binomial_distribution):
`,inputs:["md","empiricalLeaplingRate","totalBirths"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-18"),expanded:[],variables:[]},{id:18,body:(e,t,n,i)=>({bootstrapEstimate:Float64Array.from({length:25e3},()=>e(t.randomBinomial(n,i/n)()))}),inputs:["estimateRate","d3","totalBirths","leaplings"],outputs:["bootstrapEstimate"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-19"),expanded:[],variables:[]},{id:19,body:(e,t,n,i)=>e(t.plot({y:{grid:!0},x:{domain:[1400,1650]},marks:[t.areaY(n,t.binX({y:"count",filter:null},{fillOpacity:.2})),t.lineY(n,t.binX({y:"count",filter:null})),t.ruleY([0]),t.ruleX([1461],{stroke:"black",strokeDasharray:[1,0,1]}),t.ruleX([i],{stroke:"red"})]})),inputs:["display","Plot","bootstrapEstimate","empiricalLeaplingRate"],outputs:[],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-20"),expanded:[],variables:[]},{id:20,body:(e,t,n,i,r)=>e`This *distribution* represents our belief in what sort of leapling rates we should treat as being *consistent* with the data we observed.  The histogram does a better job of showing that belief and whatever sort of shape it has, but if we were looking for a way to summarize this distribution we summarize it with an interval, say a 90% interval by saying that 90% of these credible values lie between: ${t.quantile(n,.05).toFixed(0)} and ${t.quantile(n,.95).toFixed(0)}.

Notice again that this interval *doesn't* include the newspapers value of 1461!


## Appendix - Just how sure can we be?

We saw above that when we tried to randomly permute the data's labels, the assertion that we would observe a value as high as ${i.toFixed(2)} if the true rate was 1461 in a dataset of ${r} was *incredulous*.  Just how unlikely would that be?

To answer that we can use [Sanov's Theorem](https://en.wikipedia.org/wiki/Sanov%27s_theorem) and say that the probability of observing such a large deviation is approximately:
`,inputs:["md","d3","bootstrapEstimate","empiricalLeaplingRate","totalBirths"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-21"),expanded:[],variables:[]},{id:21,body:e=>e.block`P \approx 2^{-n D(P^*, Q)}`,inputs:["tex"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-22"),expanded:[],variables:[]},{id:22,body:e=>{let t=.0006844626967830253,n=1/e,i=n*Math.log2(n/t)+(1-n)*Math.log2((1-n)/(1-t));return{q:t,p:n,kl:i}},inputs:["empiricalLeaplingRate"],outputs:["q","p","kl"],output:void 0,assets:void 0,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-23"),expanded:[],variables:[]},{id:23,body:(e,t,n)=>e`
which in this case works out to be the vanishingly small ${Math.pow(2,-t*n).toExponential(2)}!!
`,inputs:["md","totalBirths","kl"],outputs:[],output:void 0,assets:void 0,autodisplay:!0,autoview:void 0,automutable:void 0});export{p as _};
